<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DDL-69 | Probabilistic Watchlist</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700&family=Unbounded:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="hero">
        <div class="hero-top">
          <span class="badge-live">LIVE</span>
          <span class="hero-label">DDL-69 Probability Engine</span>
        </div>
        <h1>
          Hedge-fund grade watchlist signals, ranked by calibrated
          acceptance probability.
        </h1>
        <p>
          This dashboard reads your Supabase Storage artifacts, refreshes on
          a schedule, and keeps a clean separation between direction, event
          odds, and execution windows.
        </p>
      </header>

      <section class="controls glass">
        <div class="control">
          <label>Watchlist JSON URL</label>
          <input
            id="watchlistUrl"
            type="text"
            placeholder="https://.../watchlist_YYYY-MM-DD.json"
          />
        </div>
        <div class="control">
          <label>News JSON URL</label>
          <input
            id="newsUrl"
            type="text"
            placeholder="https://.../polygon_news_YYYY-MM-DD.json"
          />
        </div>
        <div class="control control-actions">
          <label>Refresh</label>
          <button id="loadBtn">Load Live Data</button>
          <span id="loadStatus" class="helper">Awaiting load.</span>
        </div>
        <div class="control">
          <label>Date Range</label>
          <div class="range">
            <input id="startDate" type="date" />
            <input id="endDate" type="date" />
          </div>
        </div>
        <div class="control">
          <label>Timeframe</label>
          <select id="timeframe">
            <option value="1d">1D</option>
            <option value="1w">1W</option>
            <option value="1m">1M</option>
            <option value="3m">3M</option>
            <option value="6m">6M</option>
          </select>
        </div>
        <div class="control">
          <label>Min Probability</label>
          <input id="minProb" type="range" min="0" max="1" step="0.01" value="0" />
          <div class="helper" id="minProbLabel">0.00</div>
        </div>
      </section>

      <section class="stats">
        <div class="stat glass">
          <div class="stat-label">Total Ideas</div>
          <div class="stat-value" id="statTotal">0</div>
          <div class="stat-sub" id="statWindow">No window</div>
        </div>
        <div class="stat glass">
          <div class="stat-label">Avg Probability</div>
          <div class="stat-value" id="statAvg">0%</div>
          <div class="stat-sub">Across filtered list</div>
        </div>
        <div class="stat glass">
          <div class="stat-label">Top Ticker</div>
          <div class="stat-value" id="statTop">—</div>
          <div class="stat-sub" id="statTopMeta">No data</div>
        </div>
        <div class="stat glass">
          <div class="stat-label">Last Update</div>
          <div class="stat-value" id="statUpdated">—</div>
          <div class="stat-sub">Auto refresh 5 min</div>
        </div>
        <div class="stat glass">
          <div class="stat-label">News Count</div>
          <div class="stat-value" id="statNews">0</div>
          <div class="stat-sub">Latest headlines</div>
        </div>
      </section>

      <section class="grid">
        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>Ranked Watchlist</h2>
              <p id="watchlistMeta">No data loaded</p>
            </div>
            <span class="panel-pill">Signals</span>
          </div>
          <div id="watchlistCards" class="cards"></div>
        </div>

        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>Market News</h2>
              <p id="newsMeta">No data loaded</p>
            </div>
            <span class="panel-pill">Headlines</span>
          </div>
          <div id="newsCards" class="news"></div>
        </div>
      </section>

      <section class="footer glass">
        <div>
          <h3>What you are seeing</h3>
          <p>
            Each idea is ranked by calibrated acceptance probability. Direction,
            event odds, and execution windows are separated by design to avoid
            timeframe drift.
          </p>
        </div>
        <div class="footer-meta">
          <span>Signals + TA + Regime + News</span>
          <span>Supabase Storage artifacts</span>
        </div>
      </section>
    </div>

    <script src="app.js"></script>
  </body>
</html>
