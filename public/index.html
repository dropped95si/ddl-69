<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DDL-69 Radar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Sora:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="backdrop"></div>
    <div class="gridlines"></div>
    <main>
      <header class="site-header">
        <div class="brand">
          <div class="brand-mark">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
          </div>
          <div>
            <div class="brand-title">DDL-69 Radar</div>
            <div class="brand-sub">Probabilistic market intelligence</div>
          </div>
        </div>
        <div class="status">
          <span class="status-pill">Live</span>
          <span id="lastUpdate">No data yet</span>
        </div>
      </header>

      <section class="hero">
        <div>
          <h1>Signal-ranked watchlists with timeline-aware probability.</h1>
          <p>
            Feed the system with your daily watchlist + news artifacts, dial the scope, and track the
            acceptance odds across time horizons. Built for fast triage and disciplined follow-through.
          </p>
          <div class="hero-actions">
            <button id="loadBtn" class="btn primary">Load Live Data</button>
            <button id="resetBtn" class="btn ghost">Reset Filters</button>
          </div>
        </div>
        <div class="hero-card">
          <div class="hero-kicker">Today’s Pulse</div>
          <div class="hero-metrics">
            <div>
              <div class="label">Scope</div>
              <div id="scopeValue" class="value">Day Trade</div>
            </div>
            <div>
              <div class="label">Min Probability</div>
              <div id="minProbLabel" class="value">0.00</div>
            </div>
            <div>
              <div class="label">Timeframe</div>
              <div id="timeframeLabel" class="value">1D</div>
            </div>
          </div>
          <div class="hero-art">
            <div class="orb"></div>
            <div class="ring"></div>
            <div class="ring small"></div>
          </div>
        </div>
      </section>

      <section class="controls">
        <div class="panel">
          <div class="panel-title">Data Sources</div>
          <div class="panel-grid">
            <label class="input-block">
              <span>Watchlist JSON URL</span>
              <input id="watchlistUrl" placeholder="https://.../watchlist_YYYY-MM-DD.json" />
            </label>
            <label class="input-block">
              <span>News JSON URL</span>
              <input id="newsUrl" placeholder="https://.../polygon_news_YYYY-MM-DD.json" />
            </label>
          </div>
        </div>

        <div class="panel">
          <div class="panel-title">Scope & Filters</div>
          <div class="chips" id="scopeChips">
            <button data-scope="day" class="chip active">Day Trade</button>
            <button data-scope="swing" class="chip">Swing</button>
            <button data-scope="long" class="chip">Long</button>
          </div>
          <div class="panel-grid">
            <label class="input-block">
              <span>Date Range</span>
              <div class="row">
                <input id="startDate" type="date" />
                <input id="endDate" type="date" />
              </div>
            </label>
            <label class="input-block">
              <span>Timeframe</span>
              <select id="timeframe">
                <option value="1d">1D</option>
                <option value="1w">1W</option>
                <option value="1m">1M</option>
                <option value="3m">3M</option>
              </select>
            </label>
            <label class="input-block">
              <span>Min Probability</span>
              <input id="minProb" type="range" min="0" max="1" step="0.01" value="0" />
            </label>
          </div>
          <div class="panel-footer">
            <span id="filterHint">Filters active: 0</span>
            <span class="muted">Cache busting is automatic.</span>
          </div>
        </div>
      </section>

      <section class="main-grid">
        <div>
          <div class="section-title">
            <h2>Ranked Watchlist</h2>
            <span id="watchlistMeta">No data loaded</span>
          </div>
          <div id="watchlistCards" class="card-grid"></div>
        </div>
        <aside>
          <div class="section-title">
            <h2>Signal Mosaic</h2>
            <span id="mosaicMeta">Awaiting data</span>
          </div>
          <div id="mosaic" class="mosaic"></div>

          <div class="section-title mt">
            <h2>Fresh News</h2>
            <span id="newsMeta">No data loaded</span>
          </div>
          <div id="newsCards" class="news-list"></div>
        </aside>
      </section>

      <section class="footer-panel">
        <div>
          <h3>How to read it</h3>
          <p>
            Probability is calibrated per scope. Low odds become watch zones, not trades. Use the scope
            chips to align timeframe, then refine entries elsewhere.
          </p>
        </div>
        <div class="footer-stats">
          <div>
            <span class="label">Model Stack</span>
            <span>Qlib • TA • News • Regime</span>
          </div>
          <div>
            <span class="label">Storage</span>
            <span>Supabase + Parquet</span>
          </div>
          <div>
            <span class="label">Update</span>
            <span>Daily + On-demand</span>
          </div>
        </div>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
